!function(){"use strict";function e(t,n){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,o=r(e);if(t){var a=r(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return n(this,i)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(A){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),u=new j(i||[]);return r(a,"_invoke",{value:E(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h={};function v(){}function p(){}function d(){}var y={};l(y,o,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(F([])));g&&g!==t&&n.call(g,o)&&(y=g);var w=d.prototype=v.prototype=Object.create(y);function b(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function i(r,o,a,u){var s=f(e[r],e,o);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&n.call(c,"__await")?t.resolve(c.__await).then(function(e){i("next",e,a,u)},function(e){i("throw",e,a,u)}):t.resolve(c).then(function(e){l.value=e,a(l)},function(e){return i("throw",e,a,u)})}u(s.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return L()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function F(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=d,r(w,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},b(k.prototype),l(k.prototype,a,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(w),l(w,u,"Generator"),l(w,o,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=F,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:F(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkmaskito=self.webpackChunkmaskito||[]).push([[9386],{70997:function(e,t,n){n.d(t,{fV:function(){return a}});var r,i=n(74788),o=n(84800),a=((r=c(function e(){f(this,e)})).\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({imports:[o.JF,o.mG,o.Lx,o.Lq,o.u4]}),r)},52494:function(e,t,n){n.d(t,{U5:function(){return o}}),n(49510),n(47258);var r,i=n(74788),o=((r=c(function e(){f(this,e)})).\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({}),r);n(40635)},49510:function(e,t,n){n.d(t,{F:function(){return u}});var r,i=n(87862),o=n(9513),a=n(74788),u=(r=c(function e(t){var n=this;f(this,e),this.accessor=t,this.maskito=o.A_;var r=t.writeValue.bind(t);t.writeValue=function(e){r((0,o.CV)(String(null!=e?e:""),n.maskito))}}),r.\u0275fac=function(e){return new(e||r)(a.Y36(i.Fj))},r.\u0275dir=a.lG2({type:r,selectors:[["input","maskito",""],["textarea","maskito",""]],hostBindings:function(e,t){1&e&&a.NdJ("input",function(e){return t.accessor._handleInput(e.target.value)})("blur",function(){return t.accessor.onTouched()})("compositionstart",function(){return t.accessor._compositionStart()})("compositionend",function(e){return t.accessor._compositionEnd(e.target.value)})},inputs:{maskito:"maskito"},features:[a._Bn([i.Fj,{provide:i.JU,multi:!0,useExisting:i.Fj}])]}),r)},47258:function(e,t,n){n.d(t,{r:function(){return u}});var r,i=n(64762),o=n(74788),a=n(9513),u=(r=function(){function e(t,n){f(this,e),this.ngZone=t,this.elementRef=n,this.maskedElement=null,this.maskito=a.A_,this.maskitoElement=a.gI}return c(e,[{key:"ngOnChanges",value:function(){var e;return(0,i.mG)(this,void 0,void 0,s().mark(function t(){var n,r,i=this;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=this.maskedElement)||void 0===e||e.destroy(),n=this.maskitoElement,t.next=4,n(this.elementRef.nativeElement);case 4:r=t.sent,this.maskitoElement===n&&this.ngZone.runOutsideAngular(function(){i.maskedElement=new a.C8(r,i.maskito)});case 6:case"end":return t.stop()}},t,this)}))}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.maskedElement)||void 0===e||e.destroy()}}]),e}(),r.\u0275fac=function(e){return new(e||r)(o.Y36(o.R0b),o.Y36(o.SBq))},r.\u0275dir=o.lG2({type:r,selectors:[["","maskito",""]],inputs:{maskito:"maskito",maskitoElement:"maskitoElement"},features:[o.TTD]}),r)},40635:function(e,t,n){n.d(t,{c:function(){return a}});var r,i=n(9513),o=n(74788),a=((r=function(){function e(){f(this,e)}return c(e,[{key:"transform",value:function(e,t){return(0,i.CV)(String(null!=e?e:""),t)}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275pipe=o.Yjl({name:"maskito",type:r,pure:!0}),r)},9513:function(n,r,a){a.d(r,{gI:function(){return u},A_:function(){return l},C8:function(){return L},Zu:function(){return j},CV:function(){return F}});var u=function(e){return e.querySelector("input,textarea")||e};function s(e){return e}var l={mask:/^.*$/,preprocessor:s,postprocessor:s,plugins:[],overwriteMode:"shift"};function h(e){return"string"==typeof e}function v(e,t,n,r){for(var i="",o=t.length;o<e.length;o++){var a=e[o],u=(null==r?void 0:r.value[o])===a;if(!h(a)||a===n&&!u)return i;i+=a}return i}function p(e,t){return Array.isArray(t)?e.length===t.length&&Array.from(e).every(function(e,n){var r=t[n];return h(r)?e===r:e.match(r)}):t.test(e)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(p(e.value,t))return e;var r=Array.isArray(t)?function(e,t,n){var r=null,i=null,o=Array.from(e.value).reduce(function(o,a,u){var s=o+v(t,o,a,n),l=t[s.length];return h(l)?s+l:a.match(l)?(null===r&&u>=e.selection[0]&&(r=s.length),null===i&&u>=e.selection[1]&&(i=s.length),s+a):s},""),a=v(t,o,"",n);return{value:p(o+a,t)?o+a:o,selection:[null!=r?r:o.length,null!=i?i:o.length]}}(e,t,n):function(e,t){var n=e.value,r=o(e.selection,2),i=r[0],a=r[1],u=i,s=a;return{value:Array.from(n).reduce(function(e,n,r){var o=e+n;return i===r&&(u=e.length),a===r&&(s=e.length),o.match(t)?o:e},""),selection:[u,s]}}(e,t),i=r.value,a=r.selection;return{selection:a,value:Array.isArray(t)?i.slice(0,t.length):i}}function y(e,t){if(!Array.isArray(t))return e;var n=o(e.selection,2),r=n[0],a=n[1],u=[],s=Array.from(e.value).reduce(function(e,n,i){var o=t[i];return i===r&&u.push(e.length),i===a&&u.push(e.length),h(o)&&o===n?e:e+n},"");return u.length<2&&u.push.apply(u,i(Array(2-u.length).fill(s.length))),{value:s,selection:[u[0],u[1]]}}var m=function(){function e(t,n){f(this,e),this.initialElementState=t,this.maskOptions=n,this.value="",this.selection=[0,0];var r=d(t,this.getMaskExpression(t)),i=r.value,o=r.selection;this.value=i,this.selection=o}return c(e,[{key:"addCharacters",value:function(e,t){var n=o(e,2),r=n[0],i=n[1],a=this.value,u=this.getMaskExpression({value:a.slice(0,r)+t+a.slice(i),selection:[r+t.length,r+t.length]}),s={value:a,selection:[r,i]},l=y(s,u),c=o(function(e,t,n){var r=e.value,i=e.selection,a=o(i,2),u=a[0],s=a[1];return{value:r,selection:"replace"===("function"==typeof n?n({value:r,selection:i}):n)?[u,u+t.length]:[u,s]}}(l,t,this.maskOptions.overwriteMode).selection,2),f=c[0],h=c[1],v=l.value.slice(0,f)+t,p=v.length,m=d({value:v+l.value.slice(h),selection:[p,p]},u,s);if(a.slice(0,f)===d({value:v,selection:[p,p]},u,s).value||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.every(function(t){var n=t.value,r=t.selection;return n===e.value&&r[0]===e.selection[0]&&r[1]===e.selection[1]})}(this,m))throw new Error("Invalid mask value");this.value=m.value,this.selection=m.selection}},{key:"deleteCharacters",value:function(e){var t=o(e,2),n=t[0],r=t[1];if(n!==r&&r){var i=this.value,a=this.getMaskExpression({value:i.slice(0,n)+i.slice(r),selection:[n,n]}),u={value:i,selection:[n,r]},s=y(u,a),l=o(s.selection,2),c=l[0],f=l[1],h=d({value:s.value.slice(0,c)+s.value.slice(f),selection:[c,c]},a,u);this.value=h.value,this.selection=h.selection}}},{key:"getMaskExpression",value:function(e){var t=this.maskOptions.mask;return"function"==typeof t?t(e):t}}]),e}(),g=function(){function e(t){f(this,e),this.element=t,this.listeners=[]}return c(e,[{key:"listen",value:function(e,t,n){var r=this,i=t;this.element.addEventListener(e,i,n),this.listeners.push(function(){return r.element.removeEventListener(e,i)})}},{key:"destroy",value:function(){this.listeners.forEach(function(e){return e()})}}]),e}();function w(e,t,n){return e.ctrlKey===!!(1&t)&&e.altKey===!!(2&t)&&e.shiftKey===!!(4&t)&&e.metaKey===!!(8&t)&&e.keyCode===n}function b(e,t){var n=e.value,r=o(e.selection,2),i=r[0],a=r[1];if(i!==a)return[i,a];var u=t?n.slice(i).indexOf("\n")+1||n.length:n.slice(0,a).lastIndexOf("\n")+1;return[t?i:u,t?u:a]}function k(e,t){var n=e.value,r=o(e.selection,2),i=r[0],a=r[1];return i!==a?[i,a]:(t?[i,a+1]:[i-1,a]).map(function(e){return Math.min(Math.max(e,0),n.length)})}var E=/\s+$/g,S=/^\s+/g,x=/\s/;function O(e,t){var n=e.value,r=o(e.selection,2),i=r[0],a=r[1];if(i!==a)return[i,a];if(t){var u=n.slice(i),s=o(u.match(S)||[""],1)[0],l=u.replace(S,"").search(x);return[i,-1!==l?i+s.length+l:n.length]}var c=n.slice(0,a),f=o(c.match(E)||[""],1)[0],h=c.replace(E,"").split("").reverse().findIndex(function(e){return e.match(x)});return[-1!==h?a-f.length-h:0,a]}function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.filter(function(e){return!!e}).reduce(function(e,t){return Object.assign(Object.assign({},e),t.apply(void 0,[e].concat(r)))},e)}}function F(e,t){var n=Object.assign(Object.assign({},l),t),r="string"==typeof e?{value:e,selection:[0,0]}:e,i=n.preprocessor({elementState:r,data:""},"validation").elementState,o=new m(i,n),a=n.postprocessor(o,r),u=a.value,s=a.selection;return"string"==typeof e?u:{value:u,selection:s}}var L=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)}(i,n);var r=t(i);function i(e,t){var n;return f(this,i),(n=r.call(this)).element=e,n.maskitoOptions=t,n.isTextArea="TEXTAREA"===n.element.nodeName,n.eventListener=new g(n.element),n.options=Object.assign(Object.assign({},l),n.maskitoOptions),n.teardowns=n.options.plugins.map(function(e){return e(n.element,n.options)}),n.ensureValueFitsMask(),n.updateHistory(n.elementState),n.eventListener.listen("keydown",function(e){return w(t=e,1,89)||w(t,5,90)||w(t,12,90)?(e.preventDefault(),n.redo()):function(e){return w(e,1,90)||w(e,8,90)}(e)?(e.preventDefault(),n.undo()):void 0;var t}),"onbeforeinput"in e?n.eventListener.listen("beforeinput",function(e){var t=e.inputType.includes("Forward");switch(n.updateHistory(n.elementState),e.inputType){case"historyUndo":return e.preventDefault(),n.undo();case"historyRedo":return e.preventDefault(),n.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return n.handleDelete({event:e,isForward:t,selection:k(n.elementState,t)});case"deleteWordForward":case"deleteWordBackward":return n.handleDelete({event:e,isForward:t,selection:O(n.elementState,t),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return n.handleDelete({event:e,isForward:t,selection:b(n.elementState,t),force:!0});case"insertLineBreak":return n.handleEnter(e);default:return n.handleInsert(e,e.data||"")}}):(n.eventListener.listen("keydown",function(e){return n.handleKeydown(e)}),n.eventListener.listen("paste",function(e){var t;return n.handleInsert(e,(null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain"))||"")})),n.eventListener.listen("input",function(){n.ensureValueFitsMask(),n.updateHistory(n.elementState)}),n}return c(i,[{key:"elementState",get:function(){var e=this.element;return{value:e.value,selection:[e.selectionStart||0,e.selectionEnd||0]}}},{key:"destroy",value:function(){this.eventListener.destroy(),this.teardowns.forEach(function(e){return null==e?void 0:e()})}},{key:"updateElementState",value:function(e){var t=e.value,n=e.selection,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{inputType:"insertText",data:null},i=this.elementState.value;this.updateValue(t),this.updateSelectionRange(n),i!==t&&this.dispatchInputEvent(r)}},{key:"updateSelectionRange",value:function(e){var t,n,r=o(e,2),i=r[0],a=r[1];(this.element.selectionStart!==i||this.element.selectionEnd!==a)&&(null===(n=(t=this.element).setSelectionRange)||void 0===n||n.call(t,i,a))}},{key:"updateValue",value:function(e){this.element.value=e}},{key:"ensureValueFitsMask",value:function(){this.updateElementState(F(this.elementState,this.options))}},{key:"dispatchInputEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inputType:"insertText",data:null},t="undefined"!=typeof window?window:globalThis;(null==t?void 0:t.InputEvent)&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}},{key:"handleKeydown",value:function(e){var t=e.key,n="Delete"===t;switch(t){case"Backspace":case"Delete":return this.handleDelete({event:e,isForward:n,selection:k(this.elementState,n)});case"Enter":return this.handleEnter(e)}!function(e){var t=e.key,n=e.ctrlKey,r=e.metaKey,i=e.altKey,o=n||r||i,a=/^(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])$/.test(t);return!o&&"Backspace"!==t&&a}(e)||this.handleInsert(e,t)}},{key:"handleDelete",value:function(e){var t=e.event,n=e.selection,r=e.isForward,i=e.force,a=void 0!==i&&i,u={value:this.elementState.value,selection:n},s=o(u.selection,2),l=s[0],c=s[1],f=this.options.preprocessor({elementState:u,data:""},r?"deleteForward":"deleteBackward").elementState,h=new m(f,this.options),v=o(f.selection,2),p=v[0],d=v[1];h.deleteCharacters([p,d]);var y=this.options.postprocessor(h,u);if(u.value.slice(0,l)+u.value.slice(c)!==y.value||a)return t.preventDefault(),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.every(function(t){return t.value===e.value})}(u,f,h,y)?this.updateSelectionRange(r?[d,d]:[p,p]):(this.updateElementState(y,{inputType:"inputType"in t?t.inputType:r?"deleteContentForward":"deleteContentBackward",data:null}),void this.updateHistory(y))}},{key:"handleInsert",value:function(e,t){var n=this.elementState,r=this.options.preprocessor({data:t,elementState:n},"insert"),i=r.elementState,a=r.data,u=void 0===a?t:a,s=new m(i,this.options);try{s.addCharacters(i.selection,u)}catch(p){return e.preventDefault()}var l=o(i.selection,2),c=l[0],f=l[1],h=i.value.slice(0,c)+t+i.value.slice(f),v=this.options.postprocessor(s,n);h!==v.value&&(e.preventDefault(),this.updateElementState(v,{data:t,inputType:"inputType"in e?e.inputType:"insertText"}),this.updateHistory(v))}},{key:"handleEnter",value:function(e){this.isTextArea&&this.handleInsert(e,"\n")}}]),i}(function(){function e(){f(this,e),this.now=null,this.past=[],this.future=[]}return c(e,[{key:"undo",value:function(){var e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}},{key:"redo",value:function(){var e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}},{key:"updateHistory",value:function(e){if(this.now){var t=this.now.value!==e.value,n=this.now.selection.some(function(t,n){return t!==e.selection[n]});!t&&!n||(t&&(this.past.push(this.now),this.future=[]),this.now=e)}else this.now=e}},{key:"updateElement",value:function(e,t){this.now=e,this.updateElementState(e,{inputType:t,data:null})}}]),e}())}}])}();