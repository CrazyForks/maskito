"use strict";(self.webpackChunkmaskito=self.webpackChunkmaskito||[]).push([[592],{7255:(z,D,w)=>{w.d(D,{f:()=>F,r:()=>U});var p=w(6605);function N(n,t){const e=new RegExp(`[${t.join("")}]`,"gi");return({elementState:s,data:r})=>{const{value:i,selection:o}=s;return{elementState:{selection:o,value:i.replace(e,n)},data:r.replace(e,n)}}}function R({decimalSeparator:n,precision:t}){return({elementState:e,data:s})=>{const{value:r,selection:i}=e,[o]=i;return t<=0||r.includes(n)||!s.startsWith(n)?{elementState:e,data:s}:{elementState:e,data:r.slice(0,o)?s:"0"+s}}}function M({decimalSeparator:n,thousandSeparator:t,decimalZeroPadding:e}){return({elementState:s,data:r},i)=>{const{value:o,selection:u}=s,[l,c]=u,m=o.slice(l,c);return"deleteBackward"!==i&&"deleteForward"!==i||!(e?[n,t]:[t]).includes(m)?{elementState:s,data:r}:{elementState:{value:o,selection:"deleteForward"===i?[c,c]:[l,l]},data:r}}}function _(n){return({value:t,selection:e})=>{const[s,r]=e,i=t.includes(n),[o,u=""]=t.split(n),l=o.replace(/^0+/,"0"),c=l.length>1&&l.startsWith("0")?l.slice(1):l,m=o.length-c.length;return{value:c+(i?n:"")+u,selection:[Math.max(s-m,0),Math.max(r-m,0)]}}}function O({max:n,thousandSeparator:t,decimalSeparator:e}){return({value:s,selection:r})=>{if(Number(s.replace(new RegExp(t,"g"),"").replace(e,"."))>n){const o=`${n}`.replace(".",e);return{value:o,selection:[o.length,o.length]}}return{value:s,selection:r}}}function I({thousandSeparator:n,decimalSeparator:t}){return({value:e,selection:s})=>{const[r,i=""]=e.split(t),[o,u]=s;let[l,c]=s;const m=Array.from(r.replace(/^-/,"")).reduceRight((g,a,f)=>{const h=g.length&&(g.length+1)%4==0;return a===n&&h?a+g:a!==n||h?h?(f<=o&&l++,f<=u&&c++,a+n+g):a+g:(f<=o&&l--,f<=u&&c--,g)},"");return{value:(e.startsWith("-")?"-":"")+m+(e.includes(t)?t:"")+i,selection:[l,c]}}}function j({decimalSeparator:n,precision:t,decimalZeroPadding:e}){return t<=0||!e?s=>s:({value:s,selection:r})=>{const[i,o=""]=s.split(n);return i?{value:i+n+o.padEnd(t,"0"),selection:r}:{value:s,selection:r}}}function x({decimalSeparator:n,thousandSeparator:t}){return","===n||"."===n?[".","\u0431","\u044e"].filter(e=>e!==t):[]}function W({decimalSeparator:n,isNegativeAllowed:t,precision:e,thousandSeparator:s}){const i=t?"-?":"",o=`[\\d${s}]*`;return e>0?new RegExp(`^${i}${o}(${n}\\d{0,${e}})?$`):new RegExp(`^${i}${o}$`)}function F({max:n=Number.MAX_SAFE_INTEGER,isNegativeAllowed:t=!0,precision:e=0,thousandSeparator:s="\xa0",decimalSeparator:r=",",decimalPseudoSeparators:i=x({decimalSeparator:r,thousandSeparator:s}),decimalZeroPadding:o=!1}={}){return{mask:W({decimalSeparator:r,precision:e,thousandSeparator:s,isNegativeAllowed:t}),preprocessor:(0,p.Zu)(N(r,i),R({decimalSeparator:r,precision:e}),M({decimalSeparator:r,decimalZeroPadding:o,thousandSeparator:s})),postprocessor:(0,p.Zu)(_(r),O({decimalSeparator:r,max:n,thousandSeparator:s}),I({decimalSeparator:r,thousandSeparator:s}),j({decimalSeparator:r,decimalZeroPadding:o,precision:e})),overwriteMode:o?({value:u,selection:[l]})=>l<=u.indexOf(r)?"shift":"replace":"shift"}}const L={hours:23,minutes:59,seconds:59,milliseconds:999},Z=[":","."],$={hours:2,minutes:2,seconds:2,milliseconds:3};function b({hours:n="",minutes:t="",seconds:e="",milliseconds:s=""}){return`${n}${t&&`:${t}`}${e&&`:${e}`}${s&&`.${s}`}`}function S(n){const t=function(n){return Object.fromEntries(Object.entries(n).map(([t,e])=>[t,`${e}`.padEnd($[t],"0")]))}(n);return({elementState:e,data:s})=>{const r=s.replace(/\D+/g,"");if(!r)return{elementState:e,data:""};const{value:i,selection:o}=e,[u,l]=o;let c=l+r.length;const m=i.slice(0,u)+r+i.slice(c),g=Object.entries(function(n){const t=n.replace(/\D+/g,""),e={hours:t.slice(0,2),minutes:t.slice(2,4),seconds:t.slice(4,6),milliseconds:t.slice(6,9)};return Object.fromEntries(Object.entries(e).filter(([s,r])=>Boolean(r)))}(m)),a={};for(const[E,v]of g){const T=b(a),k=t[E],A=T.length+(T.length&&1)+$[E];if(A>=u&&A<=c&&Number(v)>Number(k))return{elementState:e,data:""};const{validatedTimeSegmentValue:X,prefixedZeroesCount:H}=d(v,k);c+=H,a[E]=X}const f=b(a);c=f.length-i.slice(c).length;const h=f.slice(u,c);return{elementState:{selection:o,value:f.slice(0,u)+"0".repeat(h.length)+f.slice(c)},data:h}}}function d(n,t,e=0){return Number(n.padEnd(t.length,"0"))<=Number(t)?{validatedTimeSegmentValue:n,prefixedZeroesCount:e}:n.endsWith("0")?d("0"+n.slice(0,t.length-1),t,e+1):d(n.slice(0,t.length-1)+"0",t,e)}function V(n){return({elementState:t},e)=>{const{value:s,selection:r}=t,[i,o]=r;if("validation"===e||"insert"===e&&i===o)return{elementState:{selection:r,value:P(s,n)}};const u=s.slice(i,o).replace(/\d/g,"0");return{elementState:{selection:"deleteBackward"===e||"insert"===e?[i,i]:[o,o],value:P(s.slice(0,i)+u+s.slice(o),n)}}}}function P(n,t){let e=n;for(;e.length<t.length;){const s=t[e.length];e+=s.match(/\w/)?"0":s}return e}function U({mode:n,timeSegmentMaxValues:t={}}){const e=Object.assign(Object.assign({},L),t);return{mask:Array.from(n).map(s=>Z.includes(s)?s:/\d/),preprocessor:(0,p.Zu)(V(n),S(e)),overwriteMode:"replace"}}}}]);