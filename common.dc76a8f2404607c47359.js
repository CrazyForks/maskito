"use strict";(self.webpackChunkmaskito=self.webpackChunkmaskito||[]).push([[592],{6654:(X,A,w)=>{w.d(A,{f:()=>j,r:()=>G});var d=w(6605);function D(n,t){const e=new RegExp(`[${t.join("")}]`,"gi");return({elementState:s,data:o})=>{const{value:r,selection:i}=s;return{elementState:{selection:i,value:r.replace(e,n)},data:o.replace(e,n)}}}function R({decimalSeparator:n,precision:t}){return({elementState:e,data:s})=>{const{value:o,selection:r}=e,[i]=r;return t<=0||o.includes(n)||!s.startsWith(n)?{elementState:e,data:s}:{elementState:e,data:o.slice(0,i)?s:"0"+s}}}function _({decimalSeparator:n,thousandSeparator:t,decimalZeroPadding:e}){return({elementState:s,data:o},r)=>{const{value:i,selection:l}=s,[u,c]=l,m=i.slice(u,c);return"deleteBackward"!==r&&"deleteForward"!==r||!(e?[n,t]:[t]).includes(m)?{elementState:s,data:o}:{elementState:{value:i,selection:"deleteForward"===r?[c,c]:[u,u]},data:o}}}function I(n){return({value:t,selection:e})=>{const[s,o]=e,r=t.includes(n),[i,l=""]=t.split(n),u=i.replace(/^0+/,"0"),c=u.length>1&&u.startsWith("0")?u.slice(1):u,m=i.length-c.length;return{value:c+(r?n:"")+l,selection:[Math.max(s-m,0),Math.max(o-m,0)]}}}function M({thousandSeparator:n,decimalSeparator:t}){return({value:e,selection:s})=>{const[o,r=""]=e.split(t),[i,l]=s;let[u,c]=s;const m=Array.from(o.replace(/^-/,"")).reduceRight((a,g,f)=>{const h=a.length&&(a.length+1)%4==0;return g===n&&h?g+a:g!==n||h?h?(f<=i&&u++,f<=l&&c++,g+n+a):g+a:(f<=i&&u--,f<=l&&c--,a)},"");return{value:(e.startsWith("-")?"-":"")+m+(e.includes(t)?t:"")+r,selection:[u,c]}}}function O({decimalSeparator:n,precision:t,decimalZeroPadding:e}){return t<=0||!e?s=>s:({value:s,selection:o})=>{const[r,i=""]=s.split(n);return r?{value:r+n+i.padEnd(t,"0"),selection:o}:{value:s,selection:o}}}function S({decimalSeparator:n,isNegativeAllowed:t,precision:e,thousandSeparator:s}){const r=t?"-?":"",i=`[\\d${s}]*`;return e>0?new RegExp(`^${r}${i}(${n}\\d{0,${e}})?$`):new RegExp(`^${r}${i}$`)}function j({min:n=Number.MIN_SAFE_INTEGER,precision:t=0,decimalSeparator:e=",",decimalPseudoSeparators:s=[".","\u0431","\u044e"],decimalZeroPadding:o=!1,thousandSeparator:r="\xa0"}={}){return{mask:S({decimalSeparator:e,precision:t,thousandSeparator:r,isNegativeAllowed:n<0}),preprocessor:(0,d.Zu)(D(e,s),R({decimalSeparator:e,precision:t}),_({decimalSeparator:e,decimalZeroPadding:o,thousandSeparator:r})),postprocessor:(0,d.Zu)(I(e),M({decimalSeparator:e,thousandSeparator:r}),O({decimalSeparator:e,decimalZeroPadding:o,precision:t})),overwriteMode:o?({value:i,selection:[l]})=>l<=i.indexOf(e)?"shift":"replace":"shift"}}const W={hours:23,minutes:59,seconds:59,milliseconds:999},x=[":","."],$={hours:2,minutes:2,seconds:2,milliseconds:3};function b({hours:n="",minutes:t="",seconds:e="",milliseconds:s=""}){return`${n}${t&&`:${t}`}${e&&`:${e}`}${s&&`.${s}`}`}function Z(n){const t=function(n){return Object.fromEntries(Object.entries(n).map(([t,e])=>[t,`${e}`.padEnd($[t],"0")]))}(n);return({elementState:e,data:s})=>{const o=s.replace(/\D+/g,"");if(!o)return{elementState:e,data:""};const{value:r,selection:i}=e,[l,u]=i;let c=u+o.length;const m=r.slice(0,l)+o+r.slice(c),a=Object.entries(function(n){const t=n.replace(/\D+/g,""),e={hours:t.slice(0,2),minutes:t.slice(2,4),seconds:t.slice(4,6),milliseconds:t.slice(6,9)};return Object.fromEntries(Object.entries(e).filter(([s,o])=>Boolean(o)))}(m)),g={};for(const[E,P]of a){const T=b(g),N=t[E],k=T.length+(T.length&&1)+$[E];if(k>=l&&k<=c&&Number(P)>Number(N))return{elementState:e,data:""};const{validatedTimeSegmentValue:B,prefixedZeroesCount:H}=p(P,N);c+=H,g[E]=B}const f=b(g);c=f.length-r.slice(c).length;const h=f.slice(l,c);return{elementState:{selection:i,value:f.slice(0,l)+"0".repeat(h.length)+f.slice(c)},data:h}}}function p(n,t,e=0){return Number(n.padEnd(t.length,"0"))<=Number(t)?{validatedTimeSegmentValue:n,prefixedZeroesCount:e}:n.endsWith("0")?p("0"+n.slice(0,t.length-1),t,e+1):p(n.slice(0,t.length-1)+"0",t,e)}function C(n){return({elementState:t},e)=>{const{value:s,selection:o}=t,[r,i]=o;if("validation"===e||"insert"===e&&r===i)return{elementState:{selection:o,value:v(s,n)}};const l=s.slice(r,i).replace(/\d/g,"0");return{elementState:{selection:"deleteBackward"===e||"insert"===e?[r,r]:[i,i],value:v(s.slice(0,r)+l+s.slice(i),n)}}}}function v(n,t){let e=n;for(;e.length<t.length;){const s=t[e.length];e+=s.match(/\w/)?"0":s}return e}function G({mode:n,timeSegmentMaxValues:t={}}){const e=Object.assign(Object.assign({},W),t);return{mask:Array.from(n).map(s=>x.includes(s)?s:/\d/),preprocessor:(0,d.Zu)(C(n),Z(e)),overwriteMode:"replace"}}}}]);